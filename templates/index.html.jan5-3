<!DOCTYPE html>
<html>
<head>
  <title>MoneyAssure Intraday Dashboard</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<h1>ğŸ“Š MoneyAssure Intraday Dashboard</h1>

{% macro table(title, data, is_gainer=True, is_gap=False) %}
<div class="box">
  <h3>{{ title }}</h3>
  <table>
    <tr>
      <th>Stock</th>
      <th>LTP</th>
      <th>%</th>
      <th>Volume (9:15)</th>
      <th>Total Vol</th>
    </tr>

    {% if data|length == 0 %}
      <tr><td colspan="5" class="empty">No stocks</td></tr>
    {% endif %}

    {% for s in data %}
    <tr>
      <td>{{ s.symbol }}</td>
      <td>{{ s.ltp }}</td>

      {% if is_gap %}
        <td class="{{ 'green' if s.gap > 0 else 'red' }}">{{ s.gap }}%</td>
      {% else %}
        <td class="{{ 'green' if is_gainer else 'red' }}">{{ s.change }}%</td>
      {% endif %}

      <td>
        {{ s.volume_fmt }}
        {% if s.buy %}<span class="yellow">ğŸ”¥ BUY</span>{% endif %}
      </td>

      <td>
        {{ s.total_volume_fmt }}
        {% if s.big %}<span class="yellow">ğŸ˜ BIG</span>{% endif %}
      </td>
    </tr>
    {% endfor %}
  </table>
</div>
{% endmacro %}

<!-- SAME SECTIONS AS BEFORE -->
<div class="section">
  <h2>ğŸ”¥ Above 2%</h2>
  <div class="container">
    {{ table("Gainers", r1b, true) }}
    {{ table("Losers", r1s, false) }}
  </div>
</div>

<div class="section">
  <h2>ğŸ“ˆ 1.5% â€“ 2%</h2>
  <div class="container">
    {{ table("Gainers", r2b, true) }}
    {{ table("Losers", r2s, false) }}
  </div>
</div>

<div class="section">
  <h2>ğŸŸ¢ 0.8% â€“ 1.5%</h2>
  <div class="container">
    {{ table("Gainers", r3b, true) }}
    {{ table("Losers", r3s, false) }}
  </div>
</div>

<div class="section">
  <h2>ğŸš€ Gap Up / Gap Down</h2>
  <div class="container">
    {{ table("Gap Up", gap_up, true, true) }}
    {{ table("Gap Down", gap_down, false, true) }}
  </div>
</div>

</body>
</html>

